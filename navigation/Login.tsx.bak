
// https://docs.expo.io/guides/authentication/#google

// 스크린 이동은??
import * as Google from 'expo-google-app-auth';

import * as React from 'react';
import * as WebBrowser from 'expo-web-browser';
import { Button } from 'react-native';

WebBrowser.maybeCompleteAuthSession();


export default function App({navigation}) {

  // const [request, response, promptAsync] = Google.useAuthRequest({
  //   expoClientId: '705980003268-m4sjefkh31ieiu4m6gbc100pbit2c2jq.apps.googleusercontent.com',
  //   iosClientId: '705980003268-q5gu3rp1pc8mias8qoecd7lmcpl481mj.apps.googleusercontent.com',
  //   androidClientId: '705980003268-m4sjefkh31ieiu4m6gbc100pbit2c2jq.apps.googleusercontent.com',
  //   webClientId: '705980003268-8ct5qea5r1vge6ve3qk6sspq10h0bq82.apps.googleusercontent.com',
    
  // });

  // React.useEffect(() => {
  //   if (response?.type === 'success') {
  //     const { authentication } = response;
      
  //     }
  // }, [response]);

  async function login() {

const config = {
     clientId: "705980003268-m4sjefkh31ieiu4m6gbc100pbit2c2jq.apps.googleusercontent.com"
      // expoClientId: `<?...?>`,
      // iosClientId: `<YOUR_IOS_CLIENT_ID>`,
      // androidClientId: `705980003268-ajooolpei4vgbbfqkm61u71n6jl4nsen.apps.googleusercontent.com`,
      // iosStandaloneAppClientId: `<YOUR_IOS_CLIENT_ID>`,
      // androidStandaloneAppClientId: `705980003268-ajooolpei4vgbbfqkm61u71n6jl4nsen.apps.googleusercontent.com`,
    };
    let {type, accessToken, user}  = await Google.logInAsync(config);

    if (type === 'success') {
      // Then you can use the Google REST API
      let userInfoResponse = await fetch('https://www.googleapis.com/userinfo/v2/me', {
        headers: { Authorization: `Bearer ${accessToken}` },
      })
      console.log(userInfoResponse);
      ;
    }

    console.log(user);
    if (type === 'success') {
      /* Log-Out */
      console.log(accessToken);
      console.log(user);
      await Google.logOutAsync({ accessToken, config });
      /* `accessToken` is now invalid and cannot be used to get data from the Google API with HTTP requests */
    }

  }
  return (
    <Button
      
      title="Login"
      onPress={() => {
        login()
        }}
    />
  );
}